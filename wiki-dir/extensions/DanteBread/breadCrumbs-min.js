(()=>{window.clearBreadcrumbs=function(){localStorage.setItem("breadcrumbs",JSON.stringify([])),window.doBreadNow()},window.doBreadNow=function(){var e=localStorage.getItem("breadcrumbs");if(e)try{e=JSON.parse(e)}catch(r){e=[]}else e=[];for(var r=location.pathname,t=0;t<e.length;)e[t].url===r?e.splice(t,1):t++;var a=[];for(t=e.length-1;t>=0;t--)if(a.length<8){var l=e[t],n='<a href="'+l.url+'">',s=l.title;s.length>50&&(s=s.substr(0,50)+"..."),n+=s+"</a>",a.push(n)}else e.splice(t,1);e.length>20&&(e=e.slice(e.length-20)),localStorage.setItem("breadcrumbs",JSON.stringify(e));var o="";for(t=0;t<a.length;t++)o+=" "+a[t]+" &raquo; ";return o+="<a href='javascript:window.clearBreadcrumbs();' class='oo-ui-panelLayout-framed'   style='font-size:7pt; padding:1pt;' title='Clear breadcrumbs'>del</a>",document.getElementById("breadcrumbinsert").innerHTML=o,o};const e=(e,r)=>{if(e===r)return!0;let t,a;try{t=new URL(e),a=new URL(r)}catch(t){throw new Error(t+" url1="+e,"url2="+r)}let l=new URLSearchParams(l),n=new URLSearchParams(n);return l.title==n.title};window.addFreshCrumb=function(r){var t=localStorage.getItem("breadcrumbs");if(t)try{t=JSON.parse(t)}catch(e){t=[]}else t=[];for(var a=location.pathname+location.search,l=0;l<t.length;)e(t[l].url,a)?t.splice(l,1):l++;a.endsWith("index.php")||"Badtitle"===r.substring(r.length-8)?console.warn("addFreshCrumb: url found violates rules, it is: "+a+"  at "+r):t.push({url:a,title:r}),t.length>20&&(t=t.slice(t.length-20)),localStorage.setItem("breadcrumbs",JSON.stringify(t))}})();